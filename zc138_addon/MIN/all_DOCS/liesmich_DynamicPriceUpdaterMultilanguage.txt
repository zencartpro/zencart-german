===== DYNAMIC PRICE UPDATER MULTILANGUAGE ===


Modifikation des Moduls Dynamic Price Updater von
(c) D Parry (Chrome) 2007 (dan@virtuawebtech.co.uk)
Originalthread:
http://www.zen-cart.com/forum/showthread.php?t=70577

Modifikationen Juni 2008 von:
Curio
und
webchills
www.webchills.at


===== Was macht dieses Modul? ===

Der Dynamic Price Updater ist dann geeignet, wenn man Attribute verwendet, die den Preis des Artikels verändern (z.B. Schuhe Größe 40 kosten 80,- Euro, Schuhe Größe 44 kosten 90,- Euro).
Zen-Cart zeigt in der Standardversion nur im Dropdown der Attribute die Preisdifferenz an, der Preis selbst bleibt im Bestellvorgang unverändert, wenn der Kunde ein Attribut mit höherem Preis auswählt.
Mit dem Price Updater ist es möglich, dem Kunden den geänderten Preis direkt anzuzeigen.
Unter 1.3.7 ist es mit diesem Modul auch möglich zusätzlich eine Sidebox mit der Preisberechnung anzeigen zu lassen.


== Änderungen in dieser modifizierten Version ==

- Unterstützung mehrerer Sprachen
- Unterstützung mehrerer Währungen
- Unterstützung von Komma als Währungstrennzeichen
- vorkonfiguriert für die Verwendung mit der Lightbox


===== Unterstützte Versionen ===

Zen-Cart 1.3.7 und 1.3.8
(Unter 1.3.8 keine zusätzliche Sidebox möglich)


================= WICHTIG =====================
Vor dem Einbau dieser Änderungen:
BACKUP von Shop und Datenbank machen! 
Keine Haftung, Verwendung auf eigene Gefahr!
BACKUP gemacht? Ok, dann weiterlesen...
=================================================



===== KONFIGURATION UND INSTALLATION ===



1) Ändern folgender Templates:

Falls im Shop die Sidebox mit der Auswahl der Währungen verwendet wird:
includes/templates/YOURTEMPLATE/sideboxes/tpl_currencies.php
Den div container mit folgendem zusätzlichen div Container umschließen:
<div id="currencyPd">
includes/templates/YOURTEMPLATE/sideboxes/tpl_currencies.php
Eine bereits geänderte tpl_currencies.php ist im Ordner includes/templates zu finden. Falls man nicht bereits Änderungen an diesem Template vorgenommen hat, kann man gleich diese verwenden.

Falls die Währungsbox nicht verwendet wird, muss folgende Änderung in der
includes/templates/YOURTEMPLATE/templates/tpl_product_info_display.php vorgenommen werden:

Alt:
<!--bof Product Price block -->
<p id="productPrices" class="productGeneral">
<?php
// base price
  if ($show_onetime_charges_description == 'true') {
    $one_time = '<span >' . TEXT_ONETIME_CHARGE_SYMBOL . TEXT_ONETIME_CHARGE_DESCRIPTION . '</span><br />';
  } else {
    $one_time = '';
  }
  echo $one_time . ((zen_has_product_attributes_values((int)$_GET['products_id']) and $flag_show_product_info_starting_at == 1) ? TEXT_BASE_PRICE : '') . zen_get_products_display_price((int)$_GET['products_id']);
?></p>
<!--eof Product Price block -->

Neu:
<!--bof Product Price block -->
<div id="currencyPd"><p id="productPrices" class="productGeneral">
<?php
// base price
  if ($show_onetime_charges_description == 'true') {
    $one_time = '<span >' . TEXT_ONETIME_CHARGE_SYMBOL . TEXT_ONETIME_CHARGE_DESCRIPTION . '</span><br />';
  } else {
    $one_time = '';
  }
  echo $one_time . ((zen_has_product_attributes_values((int)$_GET['products_id']) and $flag_show_product_info_starting_at == 1) ? TEXT_BASE_PRICE : '') . zen_get_products_display_price((int)$_GET['products_id']);
?></p></div>
<!--eof Product Price block -->


2) Anpassen der Sprachdateien für die Ausgabe des Price Updaters

Folgende Definitionen eintragen in:
includes/languages/german/YOURTEMPLATE/product_info.php

// Dynamic Price Updater multilanguage
define('UPDATER_PREFIX_TEXT', 'Ihr Preis: ');
define('UPDATER_SB_TITLE', 'Preisberechnung: ');


Folgende Definitionen eintragen in:
includes/languages/english/YOURTEMPLATE/product_info.php

// Dynamic Price Updater multilanguage
define('UPDATER_PREFIX_TEXT', 'Your price: ');
define('UPDATER_SB_TITLE', 'Price Breakdown: ');


3) Konfiguration durch Anpassen der Werte in der includes/modules/pages/product_info/jscript_updater.php
Werte, die man anpassen kann, sind mit deutschen Kommentaren versehen. Alles andere nicht ändern!

Wichtiger Hinweis falls im Shop die Lightbox nicht verwendet wird:
Die beiligende jscript_updater.php wurde bereits modifiziert, damit sie mit der Lightbox harmoniert.
Falls im Shop keine Lightbox verwendet wird, folgende beiden Zeilen ändern (Zeile 277 und 342):

if (prArr[i]=='') {

Ändern auf:

if (prArr[i] !== null) {


4) Hochladen der angepassten jscript_updater.php in folgenden Ordner:
includes/modules/pages/product_info.php



===== Support ===

Fragen zu diesem Modul bitte ins Zen-Cart Forum in folgenden Thread posten:
http://www.zen-cart.at/index.php?name=MDForum&file=viewtopic&t=5644

